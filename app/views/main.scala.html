@()

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Ofertador</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("images/favicon.png")">
        <script src="@routes.Assets.versioned("elmMain.js")" type="text/javascript"></script>
    </head>
    <body>
        <h2>This text is rendered server-side. All that follows is rendered client-side in Elm.</h2>
        <div id="app"></div>
        <script type="text/javascript">
                //Elm.Main.embed(document.getElementById("app"));
                var app = Elm.Main.fullscreen();

                app.ports.fileSelected.subscribe(function (id) {
                    var node = document.getElementById(id);
                    if (node === null) {
                        return;
                    }

                    // If your file upload field allows multiple files, you might
                    // want to consider turning this into a `for` loop.
                    var file = node.files[0];
                    var reader = new FileReader();

                    // FileReader API is event based. Once a file is selected
                    // it fires events. We hook into the `onload` event for our reader.
                    reader.onload = (function(event) {
                        // The event carries the `target`. The `target` is the file
                        // that was selected. The result is base64 encoded contents of the file.
                        var base64encoded = event.target.result;
                        // We build up the `ImagePortData` object here that will be passed to our Elm
                        // runtime through the `fileContentRead` subscription.
                        var portData = {
                            contents: base64encoded,
                            filename: file.name
                        };

                        // We call the `fileContentRead` port with the file data
                        // which will be sent to our Elm runtime via Subscriptions.
                        app.ports.fileContentRead.send(portData);
                    });

                    // Connect our FileReader with the file that was selected in our `input` node.
                    reader.readAsDataURL(file);
                });


        </script>
    </body>
</html>
